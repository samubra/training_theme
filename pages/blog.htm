title = "博客"
url = "/blog/:page?"
layout = "octaskin"
is_hidden = 0

[blogPosts]
pageNumber = "{{ :page }}"
postsPerPage = 10
noPostsMessage = "No posts found"
sortOrder = "published_at desc"
categoryPage = "category"
postPage = "post"
==
<?php

use RainLab\Blog\Models\Post;
    function onEnd()
    {
        //var_dump(Post::first()->projects);
    }
?>
==
{% set posts = blogPosts.posts %}
<div class="container">
    <div class="row">

            <div class="col s12 m8">
                {% for post in posts %}
                <div class="card sticky-action">
                    <div class="card-content">
                        <span class="card-title grey-text text-darken-4"> {{ post.title }} </span>

                        <p class="excerpt">{{ post.summary|raw }}</p>
                    </div>
                    <div class="card-action">
                        <a href="{{ post.url }}">阅读全部</a>
                    </div>
                </div>
                {% endfor %}
                {% if posts.lastPage > 1 %}
                <ul class="pagination">
                    {% if posts.currentPage > 1 %}
                    <li class="waves-effect"><a href="{{ this.page.baseFileName|page({ (__SELF__.pageParam): (posts.currentPage-1) }) }}"><i class="material-icons">chevron_left</i></a></li>
                    {% else %}
                    <li class="disabled"><a href="{{ this.page.baseFileName|page({ (__SELF__.pageParam): (posts.currentPage-1) }) }}"><i class="material-icons">chevron_left</i></a></li>
                    {% endif %}

                    {% for page in 1..posts.lastPage %}
                    <li class="{{ posts.currentPage == page ? 'active' : 'waves-effect' }}">
                        <a href="{{ this.page.baseFileName|page({ (__SELF__.pageParam): page }) }}">{{ page }}</a>
                    </li>
                    {% endfor %}

                    {% if posts.lastPage > posts.currentPage %}
                    <li class="waves-effect"><a href="{{ this.page.baseFileName|page({ (__SELF__.pageParam): (posts.currentPage+1) }) }}"><i class="material-icons">chevron_right</i></a></li>
                    {% else %}
                    <li class="disabled"><a href="{{ this.page.baseFileName|page({ (__SELF__.pageParam): (posts.currentPage+1) }) }}"><i class="material-icons">chevron_right</i></a></li>
                    {% endif %}
                </ul>
                {% endif %}
            </div>
    </div>
</div>
